---
title: Avaliação de vulnerabilidade do SQL para SQL Server em VMs do Azure
description: Descreve a avaliação de vulnerabilidade do SQL para bancos de dados SQL Server em execução em máquinas virtuais do Azure.
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.subservice: security
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 817203b8e795ce15c8c48c18bc7b9a46217dc93a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/19/2021
ms.locfileid: "97356695"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Avaliação de vulnerabilidade do SQL para SQL Server em VMs do Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

O VA (avaliação de vulnerabilidades do SQL) é um serviço fácil de configurar que pode descobrir, acompanhar e ajudá-lo a corrigir possíveis vulnerabilidades no banco de dados. Use-o para melhorar proativamente a segurança do banco de dados para seu SQL Server em VMs do Azure. 

A avaliação de vulnerabilidades faz parte da oferta do [Azure defender para SQL](../../database/azure-defender-for-sql.md) , que é um pacote unificado para recursos avançados de segurança do SQL. A avaliação de vulnerabilidade pode ser acessada e gerenciada por meio do portal central do Azure defender para SQL ou por meio da central de segurança do Azure. 

## <a name="overview"></a>Visão geral

O VA (avaliação de vulnerabilidades do SQL) é um serviço que fornece visibilidade do seu estado de segurança. A avaliação de vulnerabilidade inclui etapas acionáveis para resolver problemas de segurança e aprimorar a segurança do banco de dados. Ela pode ajudar você a: 

- Atender aos requisitos de conformidade que exigem relatórios de verificação de banco de dados. 
- Atender aos padrões de privacidade de dados. 
- Monitorar um ambiente de banco de dados dinâmico, onde as alterações são difíceis de rastrear. 

A avaliação de vulnerabilidade é um serviço de verificação que emprega uma base de dados de conhecimento de regras que sinalizam vulnerabilidades de segurança. Ele realça os desvios das práticas recomendadas, como configurações incorretas, permissões excessivas e dados confidenciais não protegidos. 

As regras se baseiam nas práticas recomendadas da Microsoft e se concentram nos problemas de segurança que apresentam os maiores riscos ao seu banco de dados e seus valiosos. Eles abordam problemas no nível do banco de dados e problemas de segurança no nível do servidor, como configurações de firewall do servidor e permissões de nível de servidor. Essas regras também representam muitos dos requisitos de várias agências regulatórias para atender aos seus padrões de conformidade. 

Os resultados da verificação incluem etapas práticas para resolver cada problema e fornecer scripts de correções personalizadas quando aplicável. Você pode personalizar um relatório de avaliação para seu ambiente definindo uma linha de base aceitável para: 

- Configurações de permissão 
- Configurações de recurso 
- Configurações de banco de dados 

## <a name="enable-sql-va"></a>Habilitar SQL VA

Habilite o Azure defender para SQL Servers em computadores para implementar a avaliação de vulnerabilidade. 

Para usar o Azure defender para SQL Server, siga estas etapas:

1. [Instalar a extensão do agente IaaS do SQL](sql-agent-extension-manually-register-single-vm.md)
1. [Habilitar o provisionamento automático do agente de Log Analytics](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [Habilitar o plano da central de segurança opcional](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

Como a avaliação de vulnerabilidade é uma parte do Azure defender para SQL, uma vez que o Azure defender está habilitado em sua máquina virtual, seus bancos de dados são verificados automaticamente a cada 12 horas para identificar vulnerabilidades de segurança. Os resultados são enviados para a central de segurança do Azure para uma exibição agregada centralizada do espaço de dados SQL protegido pelo Azure defender para SQL. 

> [!NOTE]
> A verificação é leve, segura, só leva alguns segundos por banco de dados para ser executada e é inteiramente somente leitura. Ela não faz nenhuma alteração no banco de dados. 

## <a name="view-report"></a>Exibir relatório

O relatório de banco de dados apresenta uma visão geral do seu estado de segurança. Ele lista quantos problemas foram encontrados e suas respectivas severidades. Os resultados incluem avisos sobre desvios das práticas recomendadas e um instantâneo de suas configurações relacionadas à segurança, como entidades de banco de dados e funções e suas permissões associadas.  

Para exibir o relatório, siga estas etapas:

1. Vá para a [central de segurança do Azure](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) na portal do Azure.
1. Selecione **recomendações** no menu **geral** : 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="Vá para recomendações em configurações na central de segurança do Azure da portal do Azure":::

1. Role para baixo até as recomendações e expanda **corrigir vulnerabilidades**.
1. Escolha **as descobertas de avaliação de vulnerabilidade em seus servidores SQL em computadores que devem ser corrigidos**. 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="Exibir o relatório na folha recomendação da central de segurança do Azure":::

Esta página exibe uma agregação de vulnerabilidades de segurança identificadas para todas as VMs SQL Server na assinatura. 


## <a name="analyze-results"></a>Analisar resultados

Examine os resultados e identifique as descobertas no relatório que são problemas de segurança verdadeiros em seu ambiente. Faça uma busca detalhada de cada resultado com falha para entender o impacto da conclusão e o motivo da falha de cada verificação de segurança.  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="Examine os resultados e identifique as descobertas no relatório que são problemas de segurança verdadeiros em seu ambiente.":::

## <a name="set-baseline"></a>Definir linha de base 

Ao examinar os resultados da avaliação, você pode marcar os resultados como uma linha de base aceitável em seu ambiente. A linha de base é essencialmente uma personalização de como os resultados são registrados. Os resultados que correspondem à linha de base são considerados ao passar nas verificações posteriores. Depois de estabelecer seu estado de segurança de linha de base, a avaliação de vulnerabilidades só relata os desvios da linha de base. Dessa forma, você pode concentrar sua atenção nos problemas relevantes. 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="Ao examinar os resultados da avaliação, você pode marcar os resultados como uma linha de base aceitável em seu ambiente.":::

## <a name="export-results"></a>Exportar resultados

Use o recurso de [exportação contínua](../../../security-center/continuous-export.md) da central de segurança do Azure para exportar as descobertas de avaliação de vulnerabilidade para o Hub de eventos do Azure ou para log Analytics espaço de trabalho. 


## <a name="next-steps"></a>Próximas etapas

Para saber mais, consulte [avaliação de vulnerabilidades do SQL no Azure SQL](../../database/sql-vulnerability-assessment.md)e [defendendo seus dados SQL usando a central de segurança do Azure](../../../security-center/security-center-introduction.md).

