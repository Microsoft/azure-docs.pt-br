---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/30/2021
ms.locfileid: "103466128"
---
Há **24** recomendações nesta categoria.

|Recomendação |Descrição |Severidade |
|---|---|---|
|O Azure Defender para registros de contêiner deve estar habilitado |Para criar cargas de trabalho seguras em contêineres, verifique se as imagens nas quais elas se baseiam são livres de vulnerabilidades conhecidas.<br>O Azure Defender para registros de contêiner examina o registro em busca de vulnerabilidades de segurança em cada imagem de contêiner enviada por push e expõe descobertas detalhadas por imagem.<br>Para aprimorar a postura de segurança de seus contêineres e protegê-los contra ataques, habilite o Azure Defender para registros de contêiner.<br><br>Importante: a correção dessa recomendação resultará em custos para proteger os registros de contêiner. Se você não tiver nenhum registro de contêiner nessa assinatura, nenhum custo será gerado.<br>Se você criar registros de contêiner nessa assinatura no futuro, eles serão automaticamente protegidos e os custos serão iniciados nesse momento.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>Saiba mais sobre o Azure Defender para registros de contêiner.</a><br />(Política relacionada: [O Azure Defender para registros de contêiner deve estar habilitado](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)) |Alto |
|O Azure Defender para Kubernetes deve estar habilitado |O Azure Defender para Kubernetes fornece proteção contra ameaças em tempo real para seus ambientes em contêineres e gera alertas sobre atividades suspeitas.<br>É possível usar essas informações para corrigir os problemas rapidamente e aumentar a segurança de seus contêineres.<br><br>Importante: a correção dessa recomendação resultará em custos para proteger os clusters do Kubernetes. Se você não tiver nenhum cluster do Kubernetes nessa assinatura, nenhum custo será gerado.<br>Se você criar clusters do Kubernetes nessa assinatura no futuro, eles serão automaticamente protegidos e os custos serão iniciados nesse momento.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Saiba mais sobre o Azure Defender para Kubernetes.</a><br />(Política relacionada: [O Azure Defender para Kubernetes deve estar habilitado](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)) |Alto |
|Um complemento do Azure Policy para Kubernetes deverá estar instalado e habilitado nos clusters |O Complemento do Azure Policy para Kubernetes estende o <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">Gatekeeper</a> v3, um webhook do controlador de admissão para o OPA (<a target="_blank" href="https://www.openpolicyagent.org/">Open Policy Agent</a>), para aplicar as garantias e imposições em escala aos seus clusters de maneira centralizada e consistente.<p>A Central de Segurança exige o complemento para fazer auditoria e impor funcionalidades de segurança e conformidade nos clusters. <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes"> Saiba mais</a>.</p><p>Requer o Kubernetes v1.14.0 ou posterior.</p><br />(Política relacionada: [O Complemento do Azure Policy para o AKS (Serviço de Kubernetes) deve estar instalado e habilitado nos clusters](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d)) |Alto |
|Deverão ser aplicados limites de memória e CPU ao contêiner |A imposição dos limites de CPU e de memória impede ataques de esgotamento de recursos (uma forma de ataque de negação de serviço).<p>Recomendamos definir limites para os contêineres a fim de garantir que o runtime impeça o contêiner de usar mais do que o limite de recursos configurado.</p><br />(Política relacionada: [Garantir que os limites de CPU e de recursos de memória do contêiner não excedem os limites especificados no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)) |Médio |
|As imagens de contêiner deverão ser implantadas somente se forem de registros confiáveis |As imagens em execução no cluster do Kubernetes devem ser provenientes de registros de imagem de contêiner conhecidos e monitorados. Os registros confiáveis reduzem o risco de exposição do cluster, limitando o potencial para a introdução de vulnerabilidades desconhecidas, problemas de segurança e imagens mal-intencionadas.<br />(Política relacionada: [Garantir que haja somente imagens de contêiner permitidas no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |Alto |
|Os registros de contêiner devem ser criptografados com uma CMK (chave gerenciada pelo cliente) |Use chaves gerenciadas pelo cliente para gerenciar a criptografia em repouso no conteúdo dos seus Registros. Por padrão, os dados são criptografados em repouso com chaves gerenciadas pelo serviço, mas as CMK (chaves gerenciada pelo cliente) normalmente são necessárias para atender aos padrões de conformidade regulatória. CMKs permitem que os dados sejam criptografados com uma chave do Azure Key Vault criada por você e de sua propriedade. Você tem total controle e responsabilidade pelo ciclo de vida da chave, incluindo rotação e gerenciamento. Saiba mais sobre a criptografia CMK em https://aka.ms/acr/CMK.<br />(Política relacionada: [os registros de contêiner devem ser criptografados com uma CMK (chave gerenciada pelo cliente)](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580)) |Médio |
|Os registros de contêiner não devem permitir acesso irrestrito à rede |Por padrão, os registros de contêiner do Azure aceitam conexões pela Internet de hosts em qualquer rede. Para proteger seus Registros contra possíveis ameaças, permita o acesso somente de endereços ou intervalos de endereços IP públicos específicos. Se o Registro não tiver uma regra de IP/firewall ou uma rede virtual configurada, ele será exibido nos recursos não íntegros. Saiba mais sobre as regras de rede do Registro de Contêiner aqui: https://aka.ms/acr/portal/public-network e aqui https://aka.ms/acr/vnet.<br />(Política relacionada: [os registros de contêiner não devem permitir acesso irrestrito à rede](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71)) |Médio |
|Os registros de contêiner devem usar um link privado |O Link Privado do Azure permite que você conecte sua rede virtual aos serviços do Azure sem um endereço IP público na origem ou no destino. A plataforma de link privado manipula a conectividade entre o consumidor e os serviços pela rede de backbone do Azure. Por meio do mapeamento de pontos de extremidade privados para seus registros de contêiner, em vez de todo o serviço, você também estará protegido contra riscos de vazamento de dados. Saiba mais em: https://aka.ms/acr/private-link.<br />(Política relacionada: [os registros de contêiner devem usar um link privado](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Médio |
|Os contêineres com elevação de privilégio deverão ser evitados |Os contêineres não devem ser executados com a elevação de privilégio na raiz no cluster do Kubernetes.<br>O atributo AllowPrivilegeEscalation controla se um processo pode obter mais privilégios do que o processo pai.<br />(Política relacionada: [Os clusters do Kubernetes não devem permitir a elevação de privilégio do contêiner](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |Médio |
|Os contêineres que compartilham namespaces de host confidenciais deverão ser evitados |Para fornecer proteção contra a elevação de privilégio fora do contêiner, evite o acesso do pod aos namespaces de host confidenciais (ID do processo de host e IPC do host) em um cluster do Kubernetes.<br />(Política relacionada: [Os contêineres de cluster do Kubernetes não devem compartilhar a ID do processo de host nem o namespace de IPC do host](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |Médio |
|Os contêineres deverão escutar somente em portas permitidas |Para reduzir a superfície de ataque do cluster do Kubernetes, restrinja o acesso ao cluster limitando o acesso dos contêineres às portas configuradas.<br />(Política relacionada: [Garantir que os contêineres só escutem as portas permitidas no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |Médio |
|Um sistema de arquivos raiz imutável (somente leitura) deverá ser aplicado aos contêineres |Os contêineres devem ser executados com um sistema de arquivos raiz somente leitura no cluster do Kubernetes. O sistema de arquivos imutável protege os contêineres contra alterações em runtime com a adição de binários mal-intencionados ao caminho.<br />(Política relacionada: [Os contêineres de cluster do Kubernetes devem ser executados com um sistema de arquivos raiz somente leitura](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |Médio |
|Os clusters do Kubernetes devem ser acessíveis somente via HTTPS |O uso do HTTPS garante a autenticação e protege os dados em trânsito de ataques de interceptação de camada de rede. Essa funcionalidade está em disponibilidade geral para o AKS (Serviço do Kubernetes) e em versão prévia para o Mecanismo AKS e o Azure Arc habilitado para Kubernetes. Para obter mais informações, visite https://aka.ms/kubepolicydoc<br />(Política relacionada: [Impor ingress de HTTPS no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |Alta |
|O servidor da API de Gerenciamento de Serviços do Kubernetes deve ser configurado com acesso restrito |Para que apenas aplicativos de redes, computadores ou sub-redes permitidos possam acessar seu cluster, restrinja o acesso ao seu servidor de API de Gerenciamento de Serviços do Kubernetes. Você pode restringir o acesso definindo intervalos de IP autorizados ou configurando seus servidores de API como clusters privados, conforme explicado em <a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a>.<br />(Política relacionada: [Os intervalos de IP autorizados devem ser definidos nos Serviços do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |Alto |
|Os Serviços de Kubernetes devem ser atualizados para uma versão não vulnerável do Kubernetes |Atualize o cluster do serviço de Kubernetes para a última versão do Kubernetes a fim de fornecer proteção contra as vulnerabilidades conhecidas na versão atual do Kubernetes. A vulnerabilidade <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> foi corrigida nas versões do Kubernetes 1.11.9 e posterior, 1.12.7 e posterior, 1.13.5 e posterior e 1.14.0 e posterior<br />(Política relacionada: [Os Serviços do Kubernetes devem ser atualizados para uma versão não vulnerável do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c)) |Alto |
|Deverão ser aplicadas aos contêineres funcionalidades do Linux com privilégios mínimos |Para reduzir a superfície de ataque do contêiner, restrinja as funcionalidades do Linux e conceda privilégios específicos aos contêineres sem conceder todos os privilégios do usuário raiz. Recomendamos remover todas as funcionalidades e adicionar aquelas que são necessárias<br />(Política relacionada: [Os contêineres de cluster do Kubernetes devem usar somente as funcionalidades permitidas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |Médio |
|As ações para substituir ou desabilitar o perfil do AppArmor de contêineres deverão ser restritas |Os contêineres em execução no cluster do Kubernetes devem ser limitados apenas aos perfis do AppArmor permitidos.<br>O AppArmor (Application Armor) é um módulo de segurança do Linux que protege um sistema operacional e os aplicativos contra ameaças à segurança. Para usá-lo, um administrador do sistema associa um perfil de segurança do AppArmor a cada programa.<br />(Política relacionada: [Os contêineres de cluster do Kubernetes devem usar somente os perfis do AppArmor permitidos](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |Alta |
|Os contêineres com privilégios deverão ser evitados |Para evitar o acesso irrestrito ao host, evite o uso de contêineres privilegiados sempre que possível.<p>Os contêineres privilegiados têm todas as funcionalidades raiz de um computador host. Eles podem ser usados como pontos de entrada para ataques e para distribuir um código mal-intencionado ou malware para redes, aplicativos, hosts comprometidos.</p><br />(Política relacionada: [Não permitir contêineres privilegiados no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |Médio |
|O Controle de Acesso Baseado em Função deve ser usado nos Serviços de Kubernetes |Para fornecer filtragem granular das ações que os usuários podem executar, use o RBAC (controle de acesso baseado em função) para gerenciar permissões nos clusters do Serviço de Kubernetes e configurar políticas de autorização relevantes. Para saber mais, confira <a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>Controle de acesso baseado em função no Azure</a>.<br />(Política relacionada: [O RBAC (controle de acesso baseado em função) deve ser usado nos Serviços de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |Alto |
|Executar contêineres como usuário raiz deverá ser evitado |Os contêineres devem ser executados como um usuário não raiz no cluster do Kubernetes. A execução de um processo como o usuário raiz dentro de um contêiner o executa como a raiz no host. No caso de comprometimento, um invasor tem a raiz no contêiner e qualquer configuração incorreta fica mais fácil de ser explorada.<br />(Política relacionada: [Os pods e os contêineres de cluster do Kubernetes devem ser executados somente com IDs de usuário e de grupo aprovadas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |Alto |
|Os serviços deverão escutar somente em portas permitidas |Para reduzir a superfície de ataque do cluster do Kubernetes, restrinja o acesso ao cluster limitando o acesso dos serviços às portas configuradas.<br />(Política relacionada: [Garantir que os serviços só escutem as portas permitidas no cluster do Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |Médio |
|Usar redes e portas do host deverá ser restrito |Restrinja o acesso do pod à rede do host e ao intervalo de portas de host permitido em um cluster do Kubernetes. Os pods criados com o atributo hostNetwork habilitado compartilharão o espaço de rede do nó. Para evitar que o contêiner comprometido detecte o tráfego de rede, recomendamos não colocar os pods na rede do host. Se você precisar expor uma porta de contêiner na rede do nó e o uso de uma porta de nó do Serviço de Kubernetes não atender às suas necessidades, outra possibilidade será especificar uma hostPort para o contêiner na especificação do pod.<br />(Política relacionada: [Os pods do cluster do Kubernetes só devem usar a rede do host e o intervalo de portas aprovados](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |Médio |
|O uso de montagens de volume do Pod HostPath deve ser restrito a uma lista conhecida para restringir o acesso ao nó de contêineres comprometidos |É recomendável limitar as montagens de volume HostPath de pod no cluster do Kubernetes para os caminhos de host configurados permitidos. No caso de comprometimento, o acesso do nó de contêiner dos contêineres deve ser restrito<br />(Política relacionada: [Os volumes de hostPath do pod do cluster do Kubernetes devem usar somente os caminhos do host permitidos](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Médio |
|As vulnerabilidades nas imagens do Registro de Contêiner do Azure devem ser corrigidas (da plataforma Qualys) |A avaliação de vulnerabilidade de imagem de contêiner examina o Registro em busca de vulnerabilidades de segurança e expõe as descobertas detalhadas para cada imagem. Resolver as vulnerabilidades pode melhorar muito a postura de segurança dos seus contêineres e protegê-los contra ataques.<br />(Política relacionada: [As vulnerabilidades nas imagens do Registro de Contêiner do Azure devem ser corrigidas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |Alto |
|||
